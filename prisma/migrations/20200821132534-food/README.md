# Migration `20200821132534-food`

This migration has been generated by Ebuka Umeh at 8/21/2020, 2:25:34 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "Role" AS ENUM ('USER', 'ADMIN');

CREATE TYPE "Protein" AS ENUM ('BEEF', 'CHICKEN');

CREATE TYPE "Status" AS ENUM ('PENDING', 'PROGRESS', 'COMPLETED', 'DELIVERED', 'CANCELLED');

ALTER TABLE "public"."Trip" DROP CONSTRAINT "Trip_tripId_fkey"

CREATE TABLE "public"."Food" (
"id" SERIAL,
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
"description" text  NOT NULL ,
"name" text  NOT NULL ,
"profile" text  NOT NULL ,
"profiles" text []  ,
"price" text  NOT NULL ,
"discountprice" text  NOT NULL ,
"category" integer []  ,
"liters" integer  NOT NULL DEFAULT 2,
"postedById" integer   ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Order" (
"id" SERIAL,
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
"description" text   ,
"protein" "Protein" NOT NULL ,
"liters" integer  NOT NULL ,
"price" text  NOT NULL ,
"time" integer   ,
"status" "Status" NOT NULL ,
"postedById" integer   ,
"foodId" integer   ,
PRIMARY KEY ("id"))

ALTER TABLE "public"."User" DROP COLUMN "name",
ADD COLUMN "firstname" text   ,
ADD COLUMN "lastname" text   ,
ADD COLUMN "phone" text   ,
ADD COLUMN "whatsapp" text   ,
ADD COLUMN "role" "Role" NOT NULL DEFAULT E'USER',
ADD COLUMN "seller" boolean  NOT NULL DEFAULT false;

ALTER TABLE "public"."Food" ADD FOREIGN KEY ("postedById")REFERENCES "public"."User"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Order" ADD FOREIGN KEY ("postedById")REFERENCES "public"."User"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Order" ADD FOREIGN KEY ("foodId")REFERENCES "public"."Food"("id") ON DELETE SET NULL ON UPDATE CASCADE

DROP TABLE "public"."Trip";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200821130522..20200821132534-food
--- datamodel.dml
+++ datamodel.dml
@@ -1,8 +1,8 @@
 // 1
 datasource db {
   provider = "postgresql" 
-  url = "***"
+  url = "***"
 }
 // 2
 generator client {
@@ -54,9 +54,9 @@
 model Order {
   id          Int      @id @default(autoincrement())
   createdAt   DateTime @default(now())
-  description String
+  description String?
   protein Protein
   liters Int
   price String
   time Int?
```


